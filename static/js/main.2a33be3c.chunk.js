(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{13:function(e,t,a){e.exports={listItem__img:"ImageGalleryItem_listItem__img__15HXO"}},14:function(e,t,a){e.exports={list:"ImageGallery_list__264fp"}},15:function(e,t,a){e.exports={container:"Modal_container__3J4j5"}},17:function(e,t,a){e.exports={container:"Spiner_container__3E1Rd"}},18:function(e,t,a){e.exports=a(46)},46:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(12),l=a.n(o),c=a(6),i=a.n(c),u=a(10),s=a(8),m=a(2),h=a(3),d=a(5),g=a(4),f=a(7),p=a.n(f),_=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={value:""},e.handleChangeValue=function(t){var a=t.target;return e.setState({value:a.value})},e.onHandleSubmit=function(t){var a=e.state.value;t.preventDefault(),e.props.onSubmit(a),""!==a&&e.setState({value:""})},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.state.value;return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:p.a.header},n.a.createElement("form",{onSubmit:this.onHandleSubmit,className:p.a.form},n.a.createElement("input",{type:"text",value:e,placeholder:"search image...",autoFocus:!0,className:p.a.header__input,onChange:this.handleChangeValue}),n.a.createElement("button",{type:"submit",className:p.a.header__btn},"Search"))))}}]),a}(r.Component),v=a(13),b=a.n(v);function y(e){var t=e.gallery;return n.a.createElement(n.a.Fragment,null,t.map((function(e){return n.a.createElement("li",{key:e.id},n.a.createElement("img",{src:e.webImgUrl,width:e.webformatWidth,height:e.webformatHeight,"data-large":e.largeImageURL,className:b.a.listItem__img,alt:e.tags}))})))}var w=a(14),E=a.n(w);function S(e){var t=e.gallery,a=e.onClick;return n.a.createElement("ul",{className:E.a.list,onClick:a},n.a.createElement(y,{gallery:t}))}var k=a(9),I=a.n(k);function O(e){var t=e.LoadMore;return n.a.createElement("div",{className:I.a.footer},n.a.createElement("button",{className:I.a.footer__btn,type:"button",onClick:t},"Load more"))}var j=a(15),C=a.n(j),x=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).handleKeyDown=function(t){"Escape"===t.code&&e.props.closeModal()},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.closeModal,a=e.url;return n.a.createElement("div",{className:C.a.container,onClick:t},n.a.createElement("div",null,n.a.createElement("img",{src:a,alt:"someImage"})))}}]),a}(r.Component),M=a(16),L=a.n(M),A=(a(45),a(17)),N=a.n(A);function B(){return n.a.createElement("div",{className:N.a.container},n.a.createElement(L.a,{type:"ThreeDots",color:"#563fd6e6",height:80,width:80}))}var H={API_KEY:"16796853-8112350817a4bd9fba3110e85",fetchArticles:function(e,t){var a=this;return Object(s.a)(i.a.mark((function r(){var n,o,l,c;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n="?q=".concat(e,"&image_type=photo&orientation=horizontal&page=").concat(t,"&per_page=12&key=").concat(a.API_KEY),r.next=4,fetch("https://pixabay.com/api/"+n);case 4:return o=r.sent,r.next=7,o.json();case 7:return l=r.sent,r.next=10,l.hits;case 10:return c=r.sent,r.abrupt("return",c);case 14:throw r.prev=14,r.t0=r.catch(0),r.t0;case 17:case"end":return r.stop()}}),r,null,[[0,14]])})))()}},R=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={gallery:[],page:1,currentQuery:"",largeImgInModal:"",loader:!1,heightToScroll:0},e.fetchArticles=Object(s.a)(i.a.mark((function t(){var a,r,n,o,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.state,r=a.currentQuery,n=a.page,e.setState({loader:!0}),t.next=5,H.fetchArticles(r,n);case 5:o=t.sent,l=o.map((function(e){return{id:e.id,webImgUrl:e.webformatURL,largeImageURL:e.largeImageURL,webformatWidth:e.webformatWidth,webformatHeight:e.webformatHeight,tags:e.tags}})),e.setState((function(e){return{gallery:[].concat(Object(u.a)(e.gallery),Object(u.a)(l)),page:e.page+1}})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("MY ERROR:",t.t0);case 13:return t.prev=13,e.setState({loader:!1,heightToScroll:document.body.scrollHeight-56}),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])}))),e.handleChangeSubmit=function(t){return e.setState({currentQuery:t,gallery:[],page:1,heightToScroll:0})},e.GalleryClick=function(t){var a=t.target;return e.setState({largeImgInModal:a.dataset.large})},e.CloseModal=function(){return e.setState({largeImgInModal:""})},e.LoadMore=function(){return e.fetchArticles()},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this.state,r=a.currentQuery,n=a.loader,o=a.heightToScroll;t.currentQuery!==r&&""!==r&&this.fetchArticles(),n&&window.scrollTo({top:o,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,t=e.largeImgInModal,a=e.gallery,r=e.loader,o=a.length>0,l=a.length>0,c=""!==t;return n.a.createElement(n.a.Fragment,null,c&&n.a.createElement(x,{url:t,closeModal:this.CloseModal}),n.a.createElement(_,{onSubmit:this.handleChangeSubmit}),l&&n.a.createElement(S,{onClick:this.GalleryClick,gallery:a}),o&&!r&&n.a.createElement(O,{LoadMore:this.LoadMore}),r&&n.a.createElement(B,null))}}]),a}(r.Component);l.a.render(n.a.createElement(R,null),document.querySelector("#root"))},7:function(e,t,a){e.exports={header:"SearchBar_header__4uB9B",form:"SearchBar_form__3fl--",header__input:"SearchBar_header__input__2qvJg",header__btn:"SearchBar_header__btn__3W0OL"}},9:function(e,t,a){e.exports={footer:"Button_footer__1AV9l",footer__btn:"Button_footer__btn__1m3lH"}}},[[18,1,2]]]);
//# sourceMappingURL=main.2a33be3c.chunk.js.map